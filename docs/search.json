[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "R for babies",
    "section": "",
    "text": "Tổng quan"
  },
  {
    "objectID": "index.html#về-khóa-học",
    "href": "index.html#về-khóa-học",
    "title": "R for babies",
    "section": "Về khóa học",
    "text": "Về khóa học\nKhóa học được thiết kế để hướng dẫn đội ngũ nhân viên của Trung tâm Kiểm soát bệnh tật Thành phố Hồ Chí Minh (HCDC) trong series “Tập huấn về Phân tích dữ liệu sử dụng phần mềm R và Nghiên cứu khoa học”, với 2 mục tiêu chính:\n\nBiết cách sử dụng R để phân tích dữ liệu theo quy trình chuẩn, phục vụ nghiên cứu khoa học của HCDC.\nBiết cách viết và xuất file báo cáo tự động bằng R Markdown."
  },
  {
    "objectID": "index.html#chương-trình",
    "href": "index.html#chương-trình",
    "title": "R for babies",
    "section": "Chương trình",
    "text": "Chương trình\nKhóa học kéo dài tổng cộng 7 buổi. Trong buổi đầu tiên, học viên đăng kí nhóm (3-4 người/nhóm, các thành viên trong nhóm phải ở cùng khoa). Sau mỗi buổi học lý thuyết - thực hành trên dữ liệu mẫu, bài tập về nhà là các nhóm tự thực hành sử dụng R để làm việc trên dữ liệu hiện có của khoa mình và soạn bài thuyết trình. Bài thuyết trình trong 20 phút cần có các nội dung sau:\n\nGiới thiệu sơ lược dữ liệu đang sử dụng\nNhóm muốn làm gì trên dữ liệu của mình\nDiễn giải cụ thể từng bước và ý nghĩa code R đã dùng để thực hiện từng mục tiêu\nKinh nghiệm khi dùng R cho dạng dữ liệu này và các chia sẻ khác (nếu có)\n\nTrong 1 tuần trước buổi học kế tiếp, các nhóm tự đăng kí hoặc giảng viên chọn ra 3 nhóm sẽ thuyết trình. Thời gian thuyết trình của mỗi nhóm là 30-40 phút, gồm 20 phút trình bày và 10-20 phút để các nhóm khác góp ý, đặt câu hỏi. Nhóm cũng có thể tự đặt câu hỏi của mình để mọi người cùng giải đáp.\n\n\n\n\n\n\n\n\n\nHoạt động\nNội dung\n\n\n\n\nBuổi 1\nLý thuyết\nThực hành trên dữ liệu mẫu\nGiới thiệu R\nCác bước chuẩn bị cho phân tích dữ liệu\nChia nhóm thuyết trình\n\n\nBuổi 2\nLý thuyết\nThực hành trên dữ liệu mẫu\nLàm sạch dữ liệu\nThực hành làm sạch dữ liệu\n\n\nBuổi 3\nỨng dụng trên dữ liệu của HCDC\nThuyết trình nhóm: làm sạch dữ liệu\nGiải đáp thắc mắc\n\n\nBuổi 4\nLý thuyết\nThực hành trên dữ liệu mẫu\nPhân tích dữ liệu\nThực hành phân tích dữ liệu\n\n\nBuổi 5\nỨng dụng trên dữ liệu của HCDC\nThuyết trình nhóm: phân tích dữ liệu\nGiải đáp thắc mắc\n\n\nBuổi 6\nLý thuyết\nThực hành trên dữ liệu mẫu\nTrực quan hóa dữ liệu\nLàm file báo cáo bằng R Markdown\nThực hành trực quan hóa dữ liệu\n\n\nBuổi 7\nỨng dụng trên dữ liệu của HCDC\nThuyết trình nhóm: viết và xuất file báo cáo tự động bằng R Markdown.\nGiải đáp thắc mắc\nTổng kết"
  },
  {
    "objectID": "index.html#lời-cảm-ơn",
    "href": "index.html#lời-cảm-ơn",
    "title": "R for babies",
    "section": "Lời cảm ơn",
    "text": "Lời cảm ơn\nCấu trúc khóa học được tham khảo từ các tài liệu sau:\n\nBeckerman, AP, Childs, DZ, & Petchey, OL. Getting started with R: an introduction for biologists. Oxford University Press. 2017.\nBatra, Neale, et al. The Epidemiologist R Handbook. 2021.\n\nData cho bài tập và ví dụ được tham khảo từ các nguồn sau:\n\nWorld Bank. GDP per capita (current US$). Retrieved February 10, 2024 from World Bank Open Data.\nLaksika Tharmalingam. Health and Demographics Dataset, Version 1. Retrieved February 10, 2024 from Kaggle."
  },
  {
    "objectID": "index.html#liên-hệ",
    "href": "index.html#liên-hệ",
    "title": "R for babies",
    "section": "Liên hệ",
    "text": "Liên hệ\nMọi ý kiến đóng góp, phản ánh, câu hỏi thắc mắc xin vui lòng comment (sử dụng tài khoản github) trong khung bên dưới hoặc liên hệ Thinh Ong."
  },
  {
    "objectID": "intro.html#r",
    "href": "intro.html#r",
    "title": "1  Giới thiệu",
    "section": "1.1 R",
    "text": "1.1 R\nR là một ngôn ngữ lập trình được phát triển bởi GS. Robert Gentleman và GS. Ross Ihaka tại Đại học Auckland1. Tên gọi R được đặt theo chữ cái đầu của tên 2 tác giả (Robert và Ross).\n\n\nRobert Gentleman: “Let’s write some software.”\nRoss Ihaka: “Sure, that sounds like fun.”2\n\n\n1.1.1 Ngôn ngữ lập trình\nNgôn ngữ lập trình là một tập hợp các hướng dẫn để yêu cầu máy tính thực hiện một số tác vụ nhất định.3\nNgôn ngữ là phương tiện để con người giao tiếp với con người. Ngôn ngữ lập trình là phương tiện để con người giao tiếp với máy tính.3 Vì vậy, học ngôn ngữ lập trình cũng giống như học ngoại ngữ, bao gồm từ vựng, ngữ pháp, cụm từ, mệnh đề… để viết thành một câu văn mà máy tính có thể hiểu được và làm đúng những gì con người muốn.\n\nMột số ngôn ngữ lập trình trong phân tích dữ liệu [Photo credit]\n\n\n1.1.2 Câu văn trong R\nCâu lệnh (command) hoặc hàm (function) chính là những câu văn trong R để giao tiếp với máy tính. Chúng ta phải học ngữ pháp của 1 câu lệnh và ý nghĩa của nó để có thể sử dụng R để ra lệnh cho máy tính. Một câu lệnh trong R thường có dạng như sau:\n\ntên-câu-lệnh(tên-tham-số = data-đầu-vào hoặc lựa-chọn)\n\n\nTên câu lệnh: nằm trước dấu (), thể hiện ý nghĩa câu lệnh dùng để làm gì.\nTên tham số (argument): nằm trong dấu () là những tham số của câu lệnh đó. Tham số là những yêu cầu nhỏ và cụ thể để máy tính hiểu rõ hơn yêu cầu của người dùng.\nDấu =: dùng để gán 1 giá trị cho tham số. Giá trị gán cho tham số có thể là một data đầu vào, hoặc một lựa chọn của người dùng (đúng/sai).\n\nVí dụ:\n\nmean(x = df$col1, na.rm = TRUE)\n\n\nTên câu lệnh là mean: chúng ta đang yêu cầu máy tính hãy tính giá trị trung bình của 1 biến.\nCác tham số là x và na.rm:\n\nx: là data đầu vào, ở đây chúng ta viết x = df$col1 để cho máy tính biết data đầu vào là cột col1 trong bảng data df.\nna.rm: là yêu cầu cụ thể cách giải quyết khi gặp missing value (NA), ở đây chúng ta lựa chọn na.rm = TRUE nghĩa là nếu cột col1 có NA thì bỏ những giá trị NA đi trước khi tính trung bình.\n\n\n\n\n\n\n\n\nImportant\n\n\n\nĐể đọc hướng dẫn sử dụng về câu lệnh, gõ ?tên-câu-lệnh.\n\n\n\n\n1.1.3 R và SPSS, Stata, SAS\n\n\nR là ngôn ngữ lập trình. Người dùng giao tiếp, đối thoại với máy tính bằng cách nhập những câu văn (code) giống như chat với máy tính, để máy hiểu và làm đúng những gì con người muốn.\nSPSS, Stata, SAS là các gói phần mềm thống kê (software package) thương mại, được thiết kế giao diện người dùng kéo thả, click chọn để dễ dàng giao tiếp với máy tính hơn. Người dùng cũng có thể viết code (SPSS Syntax, Stata command, SAS program) để lưu lại các bước phân tích, nhưng đây không phải mục tiêu chính của các gói thương mại này. Người dùng không thể yêu cầu máy tính làm gì khác với những chức năng đã được quy định sẵn trong gói phần mềm. Mỗi gói phần mềm được viết bằng một ngôn ngữ lập trình:\n\nSPSS: Java\nStata: C\nSAS: C"
  },
  {
    "objectID": "intro.html#tại-sao-học-r",
    "href": "intro.html#tại-sao-học-r",
    "title": "1  Giới thiệu",
    "section": "1.2 Tại sao học R?",
    "text": "1.2 Tại sao học R?\n\nMiễn phí và sử dụng được trên mọi hệ điều hành thông dụng (Windows, Macs, Linux).\nR là ngôn ngữ truyền thống cho phân tích dữ liệu trong nghiên cứu y sinh (biostatistics), tin sinh (bioinformatics), dịch tễ, mô hình dự báo… Chuyên gia ở các ngành này liên tục phát triển các gói phần mềm (packages) viết bằng R cập nhật các phương pháp mới nhất, machine learning, thiết kế web…\n\n\nCác gói phần mềm phổ biến trong R [Photo credit]\n\nVẽ biểu đồ chất lượng cao.\n\n\nMột số biểu đồ vẽ bằng R [Photo credit]"
  },
  {
    "objectID": "intro.html#sec-install",
    "href": "intro.html#sec-install",
    "title": "1  Giới thiệu",
    "section": "1.3 R và RStudio",
    "text": "1.3 R và RStudio\nR là ngôn ngữ lập trình. Sau khi cài R, chúng ta mở lên sẽ thấy giao diện giống như một khung chat trống. Khung chat này là nơi chúng ta viết code để giao tiếp với máy tính.\n\nRStudio là một môi trường phát triển tích hợp (integrated development environment hay IDE) hay nói đơn giản là một phần mềm để viết code R hiệu quả hơn.\nVì vậy, chúng ta cần cài đặt riêng R (ngôn ngữ lập trình) và RStudio (IDE).\n\n1.3.1 Cài đặt R\nTruy cập https://cran.r-project.org/ và tải R cho hệ điều hành của mình.\n\n\n\n1.3.2 Cài đặt RStudio\nTruy cập https://posit.co/download/rstudio-desktop/ và tải RStudio cho hệ điều hành của mình."
  },
  {
    "objectID": "intro.html#sec-r-pkgs",
    "href": "intro.html#sec-r-pkgs",
    "title": "1  Giới thiệu",
    "section": "1.4 R packages",
    "text": "1.4 R packages\nR packages là các gói phần mềm được viết bằng ngôn ngữ lập trình R để thực hiện một số tác vụ cụ thể.\n\n1.4.1 Cài đặt R packages\n\ninstall.packages(\"readxl\")\n\n\n\n\n\n\n\nLưu ý\n\n\n\n\nCần có internet để tải và cài đặt R packages bằng lệnh install.packages().\nKhi cài đặt, tên package phải nằm trong dấu ngoặc kép \"\".\n\n\n\n\n\n1.4.2 Sử dụng R packages\nSau khi cài đặt thì package sẽ trở thành một “thư viện” trong R. Để gọi thư viện này, dùng:\n\nlibrary(readxl)\n\n\n\n\n\n\n\nLưu ý\n\n\n\n\nKhông cần internet để sử dụng library.\nKhi gọi library thì tên library không nằm trong dấu ngoặc kép nữa \"\"."
  },
  {
    "objectID": "intro.html#r-script-và-r-markdown",
    "href": "intro.html#r-script-và-r-markdown",
    "title": "1  Giới thiệu",
    "section": "1.5 R Script và R Markdown",
    "text": "1.5 R Script và R Markdown\nCác đoạn hội thoại giữa chúng ta và máy tính có thể được lưu lại bằng file R Script (.R) hoặc R Markdown (.Rmd). Gần đây có thêm Quarto (.qmd) mở rộng hơn những gì R Markdown có thể làm. Vì cách viết Quarto khá giống R Markdown, nên chúng ta sẽ tập trung vào học R Markdown cơ bản.\n\n1.5.1 R Script\nTạo R Script bằng cách vào menu File > New File > R Script.\nR Script là file chứa các câu lệnh R và những dòng chú thích ngắn gọn về câu lệnh (comments). Có 2 cách để comment:\n\nViết dấu # đầu dòng để xác định dòng này là comment.\nViết dấu # ở cuối dòng lệnh.\n\n\n\n\n1.5.2 R Markdown\nTạo R Markdown bằng cách vào menu File > New File > R Markdown....\nR Markdown là công cụ để tạo ra tài liệu tự động. Trong file R Markdown chứa code R xen kẽ với văn bản mô tả, bảng, biểu đồ… có thể xuất ra nhiều loại định dạng như .docx, .pdf, .html, .pptx.\nCấu trúc file R Markdown gồm:\n\nYAML header: nằm ở trên cùng trong và ngăn cách với phần còn lại bằng cặp dấu ---. Phần này để mô tả tiêu đề tài liệu, tác giả, ngày tháng, định dạng mong muốn\nVăn bản: phần diễn giải cho tài liệu, gồm các đề mục và chữ diễn giải viết theo ngôn ngữ markdown.\n\nĐề mục được đánh dấu bằng dấu # và các đề mục nhỏ hơn thì tăng thêm số dấu # như ##, ###.\nPhải xuống hàng 2 lần để viết hàng mới trong văn bản.\n\nĐoạn code (code chunks): là nơi để viết code và xuất ra các kết quả mong muốn. Code chunks của R được đặt trong cặp dấu:\n\n\nĐể tạo code chunk chúng ta nhấn tổ hợp phím tắt Ctrl + Alt + I, hoặc nhấn vào icon này trên thanh công cụ, chọn R:\n\nVí dụ có file R Markdown sau:\n\nKhi knit file R Markdown trên sẽ tạo ra file báo cáo sau với đầy đủ tiêu đề, đề mục, bảng kết quả, biểu đồ… giống như được tạo ra từ 1 chương trình soạn thảo văn bản như Word. Để knit file R Markdown thì chọn kí hiệu knit trên thanh công cụ:\n\nKết quả knit như sau:\n\n\n\n\n\n1. Ihaka, R. & Gentleman, R. R: A Language for Data Analysis and Graphics. Journal of Computational and Graphical Statistics 5, 299–314 (1996).\n\n\n2. Ihaka, R. The R Project: A Brief History and Thoughts About the Future. (1998).\n\n\n3. Lenovo, Inc. Programming Language: What is a programming language? (2024)."
  },
  {
    "objectID": "prepare.html#file-data-đang-ở-đâu",
    "href": "prepare.html#file-data-đang-ở-đâu",
    "title": "2  Chuẩn bị",
    "section": "2.1 File data đang ở đâu?",
    "text": "2.1 File data đang ở đâu?\nBước đầu tiên chúng ta phải biết file data đang nằm ở đâu trong máy tính. Vị trí, hay địa chỉ, hay đường dẫn lưu file data trong máy tính gọi là path.\n\n2.1.1 Windows\nĐể Windows hiển thị đường dẫn trong Explorer, trên thanh menu chọn dấu ... > Options.\n\nChọn tab View, tick vào ô Display the full path in the title bar.\n\nSau khi làm các bước trên, click vào title bar của Explorer sẽ thấy hiển thị đầy đủ path của file hoặc folder hiện tại như sau:\n\n\n\n\n\n\n\n\nLưu ý\n\n\n\nTrong Windows, khi copy path vào R cần sửa lại theo 1 trong 2 cách sau:\n\nSửa tất cả dấu \\ thành /:\n\nC:/Users/ongph/github/r4babies/data\n\nSửa tất cả dấu \\ thành \\\\:\n\nC:\\\\Users\\\\ongph\\\\github\\\\r4babies\\\\data\n\n\n\n\n2.1.2 MacOS\nĐể hiển thị đường dẫn trong Finder, trên thanh menu chọn View > Show Path Bar\n\nTại thanh đường dẫn (Path Bar), nhấn chuột phải vào folder hoặc file, sau đó chọn Copy \"tên_folder\" as Pathname để copy đường dẫn đến folder.\nTrong ví dụ sau, đường dẫn được copy là /Users/anhptq/Desktop/r4babies/data\n\n\n\n2.1.3 Absolute path và relative path\n\n2.1.3.1 Absolute path\nTrong ví dụ trên, C:/Users/ongph/github/r4babies/data là đường dẫn tuyệt đối (absolute path). Absolute path là path đầy đủ từ đầu ổ đĩa cho đến file hay folder hiện tại.\n\n\n2.1.3.2 Relative path\nTrong folder C:/Users/ongph/github/r4babies có chứa 2 folders là /data và /analysis. Chúng ta có thể minh họa path này như sau:\nC:\n|-- Users\n    |-- ongph\n        |-- github\n            |-- r4adults\n                |-- data\n            |-- r4babies\n                |-- data\n                |-- analysis\nVí dụ chúng ta đang ở trong folder /data. Từ /data muốn hướng dẫn cho máy tính đi đến được folder /analysis có thể viết relative path như sau:\n../analysis\nTrong đó:\n\n..: đi ngược lên 1 folder, trong ví dụ này chúng ta đang ở /data, đi ngược lên 1 folder là /r4babies\n/analysis: sau khi đi ngược lên /r4babies, hướng dẫn máy tính đi tiếp tới folder /analysis\n\nTương tự, chúng ta đang ở trong folder /data nằm trong /r4babies, muốn đến folder /data nằm trong /r4adults thì viết như sau:\n../../r4adults/data\n\n\n\n2.1.4 Quy tắc đặt tên files, folders\nĐể tránh bị lỗi trong quá trình sử dụng R, nên đặt tên files, folders theo các quy tắc sau:\n\nKhông đặt tên có dấu tiếng Việt\nKhông đặt tên quá dài\nKhông đặt tên chữ viết hoa viết thường lẫn lộn, nếu cần thì chỉ đặt theo quy luật camelCase (viết hoa chữ cái đầu của các từ sau từ đầu tiên, ví dụ dataSoiHcm) hoặc PascalCase (viết hoa chữ cái đầu của tất cả các từ, ví dụ DataSoiHcm)\nKhông có khoảng trống \" \" trong tên, có thể đặt kiểu camelCase, hoặc sử dụng dấu -, _ thay thế các khoảng trống: ví dụ không dùng tên data soi HCM 2023.xlsx mà có thể đặt là dataSoiHcm2023.xlsx, hoặc data-soi-hcm-2023.xlsx, hoặc data_soi_hcm_2023.xlsx"
  },
  {
    "objectID": "prepare.html#r-project",
    "href": "prepare.html#r-project",
    "title": "2  Chuẩn bị",
    "section": "2.2 R project",
    "text": "2.2 R project\nĐể tiện quản lý, mỗi dự án phân tích nên được đặt trong 1 folder. Trong folder này chứa tất cả data, code, bảng kết quả, biểu đồ… Chúng ta sẽ dùng chức năng tạo R project của RStudio để tạo folder này.\nTrên thanh menu vào File > New Project... > New Directory.\n\nChọn Project Type là New Project.\n\nĐặt tên folder cho project này, và chọn đường dẫn nơi sẽ lưu project trong máy tính.\n\nTrong folder /test là một R project mới tạo này, chúng ta tạo thêm 2 folders /data và /analysis. Các thành phần trong folder này như sau:\ntest\n|-- data\n    |-- data.csv\n|-- analysis\n    |-- code.R\n    |-- analysis.Rmd\n|-- test.Rproj\n\nFolder /data: chứa tất cả data.\nFolder /analysis: chứa tất cả file R Markdown.\n\nTừ bây giờ, mỗi lần muốn phân tích cho dự án /test này, chúng ta mở file test.Rproj bằng RStudio. Tất cả các file code trong folder /analysis có thể đọc file trong folder /data bằng cách dùng relative path. Những data quan trọng không thể copy vào chung trong project thì dùng absolute path (xem lại phần nói về path ở Section 2.1.3). Ví dụ:\n\ndf <- read.csv(\"../data/data.csv\")"
  },
  {
    "objectID": "prepare.html#đọc-data-vào-r",
    "href": "prepare.html#đọc-data-vào-r",
    "title": "2  Chuẩn bị",
    "section": "2.3 Đọc data vào R",
    "text": "2.3 Đọc data vào R\n\n2.3.1 Phân biệt hai loại file chính\nChúng ta có thể gặp các files data ở rất nhiều format khác nhau, như .csv, .txt, .json, .xlsx, .dta… Tuy nhiên, một cách đơn giản, có thể chia các files thành 2 loại:\n\n2.3.1.1 Text files\nLà những files khi mở bằng text editor như Notepad thì có thể đọc được các chữ trong file (human-readable). Các files như .csv, .txt, .json đều là text files. Trong R đã có sẵn những functions để đọc được hầu hết các text files.\n\n\n\n\n\n\n\n\n\n\nFigure 2.1: File .csv và .json khi mở bằng Notepad\n\n\n\n\n2.3.1.2 Binary files\nLà những files khi mở bằng text editor như Notepad thì không đọc được các chữ trong file. Các files như .xlsx, .dta đều là binary files. Binary files cần được mở bằng các phần mềm chuyên dụng, ví dụ dùng Excel để mở file .xlsx thì mới đọc được dưới dạng chữ human-readable. Bản thân R không đọc được các loại file này, nhưng chúng ta có thể cài đặt và sử dụng các R packages để đọc binary files.\n\n\n\n\n\n\n\n\n\n\nFigure 2.2: File .xlsx và .dta khi mở bằng Notepad\n\n\n\n\n\n2.3.2 Đọc text files vào R\n\n2.3.2.1 read.table()\nLệnh read.table() là lệnh chung để đọc tất cả data dạng bảng.\n\nread.table(file, header = FALSE, sep = \"\")\n\nDùng ?read.table để đọc thêm hướng dẫn sử dụng và các arguments khác của lệnh. Ở đây chúng ta tìm hiểu một số arguments thường dùng:\n\nfile: path của file data đầu vào, có thể dùng absolute path hoặc relative path (xem Section 2.1.3).\nheader: dòng đầu tiên của file data có phải là tên cột không. Nếu header = TRUE thì R sẽ lấy các giá trị trong hàng đầu tiên làm tên cột. Nếu header = FALSE thì R sẽ tự đặt tên cột là V1, V2, V3…\n\n\n\n\n\n\n\nLưu ý\n\n\n\nTrong R, TRUE có thể viết tắt là T và FALSE có thể viết tắt là F.\n\n\n\nsep: các cột trong text file ngăn cách nhau bằng kí tự gì. Ví dụ file life-exp.csv nếu chúng ta mở bằng Notepad sẽ thấy các cột ngăn cách nhau bằng dấu ,.\n\n\nChúng ta đọc file life-exp.csv vào R như sau:\n\ndf <- read.table(file = \"data/life-exp.csv\", header = F, sep = \",\")\nhead(df)\n\n           V1   V2         V3               V4              V5            V6\n1     Country Year     Status Life expectancy  Adult Mortality infant deaths\n2 Afghanistan 2015 Developing             65.0             263            62\n3 Afghanistan 2014 Developing             59.9             271            64\n4 Afghanistan 2013 Developing             59.9             268            66\n5 Afghanistan 2012 Developing             59.5             272            69\n6 Afghanistan 2011 Developing             59.2             275            71\n       V7                     V8          V9      V10   V11                V12\n1 Alcohol percentage expenditure Hepatitis B Measles   BMI  under-five deaths \n2    0.01            71.27962362          65     1154  19.1                 83\n3    0.01            73.52358168          62      492  18.6                 86\n4    0.01            73.21924272          64      430  18.1                 89\n5    0.01             78.1842153          67     2787  17.6                 93\n6    0.01            7.097108703          68     3013  17.2                 97\n    V13               V14         V15       V16        V17         V18\n1 Polio Total expenditure Diphtheria   HIV/AIDS        GDP  Population\n2     6              8.16          65       0.1  584.25921 3.3736494e7\n3    58              8.18          62       0.1 612.696514    327582.0\n4    62              8.13          64       0.1 631.744976 3.1731688e7\n5    67              8.52          67       0.1    669.959  3.696958e6\n6    68              7.87          68       0.1  63.537231  2.978599e6\n                    V19                 V20                             V21\n1  thinness  1-19 years  thinness 5-9 years Income composition of resources\n2                  17.2                17.3                           0.479\n3                  17.5                17.5                           0.476\n4                  17.7                17.7                            0.47\n5                  17.9                18.0                           0.463\n6                  18.2                18.2                           0.454\n        V22\n1 Schooling\n2      10.1\n3      10.0\n4       9.9\n5       9.8\n6       9.5\n\n\nNếu đọc với argument header = T:\n\ndf <- read.table(file = \"data/life-exp.csv\", header = T, sep = \",\")\nhead(df)\n\n      Country Year     Status Life.expectancy Adult.Mortality infant.deaths\n1 Afghanistan 2015 Developing            65.0             263            62\n2 Afghanistan 2014 Developing            59.9             271            64\n3 Afghanistan 2013 Developing            59.9             268            66\n4 Afghanistan 2012 Developing            59.5             272            69\n5 Afghanistan 2011 Developing            59.2             275            71\n6 Afghanistan 2010 Developing            58.8             279            74\n  Alcohol percentage.expenditure Hepatitis.B Measles  BMI under.five.deaths\n1    0.01              71.279624          65    1154 19.1                83\n2    0.01              73.523582          62     492 18.6                86\n3    0.01              73.219243          64     430 18.1                89\n4    0.01              78.184215          67    2787 17.6                93\n5    0.01               7.097109          68    3013 17.2                97\n6    0.01              79.679367          66    1989 16.7               102\n  Polio Total.expenditure Diphtheria HIV.AIDS       GDP Population\n1     6              8.16         65      0.1 584.25921   33736494\n2    58              8.18         62      0.1 612.69651     327582\n3    62              8.13         64      0.1 631.74498   31731688\n4    67              8.52         67      0.1 669.95900    3696958\n5    68              7.87         68      0.1  63.53723    2978599\n6    66              9.20         66      0.1 553.32894    2883167\n  thinness..1.19.years thinness.5.9.years Income.composition.of.resources\n1                 17.2               17.3                           0.479\n2                 17.5               17.5                           0.476\n3                 17.7               17.7                           0.470\n4                 17.9               18.0                           0.463\n5                 18.2               18.2                           0.454\n6                 18.4               18.4                           0.448\n  Schooling\n1      10.1\n2      10.0\n3       9.9\n4       9.8\n5       9.5\n6       9.2\n\n\n\n\n\n\n\n\nNote\n\n\n\nDấu <- dùng để gán kết quả của một function cho một đối tượng (object) trong R. Nếu chỉ viết read.table(file = \"data/life-exp.csv\", header = T, sep = \",\") thì R không lưu lại kết quả sau khi đọc mà chỉ hiển thị ra màn hình.\nSau khi gán kết quả đọc của read.table() vào object df, dùng lệnh head(df) để hiển thị 6 dòng đầu tiên của bảng.\n\n\n\n\n2.3.2.2 read.csv()\nFile .csv là một định dạng thông dụng, tên đầy đủ là comma-separated values nghĩa là các giá trị được ngăn cách bởi dấu , (comma). Trong R có sẵn lệnh read.csv() để đọc file .csv.\n\nread.csv(file, header = TRUE, sep = \",\")\n\nCác arguments của read.csv() cũng tương tự read.table(), nhưng đã được quy định cho phù hợp với file .csv. Vì vậy, thường chỉ cần đặt path vào argument file là đủ.\n\ndf <- read.csv(file = \"data/life-exp.csv\")\nhead(df)\n\n      Country Year     Status Life.expectancy Adult.Mortality infant.deaths\n1 Afghanistan 2015 Developing            65.0             263            62\n2 Afghanistan 2014 Developing            59.9             271            64\n3 Afghanistan 2013 Developing            59.9             268            66\n4 Afghanistan 2012 Developing            59.5             272            69\n5 Afghanistan 2011 Developing            59.2             275            71\n6 Afghanistan 2010 Developing            58.8             279            74\n  Alcohol percentage.expenditure Hepatitis.B Measles  BMI under.five.deaths\n1    0.01              71.279624          65    1154 19.1                83\n2    0.01              73.523582          62     492 18.6                86\n3    0.01              73.219243          64     430 18.1                89\n4    0.01              78.184215          67    2787 17.6                93\n5    0.01               7.097109          68    3013 17.2                97\n6    0.01              79.679367          66    1989 16.7               102\n  Polio Total.expenditure Diphtheria HIV.AIDS       GDP Population\n1     6              8.16         65      0.1 584.25921   33736494\n2    58              8.18         62      0.1 612.69651     327582\n3    62              8.13         64      0.1 631.74498   31731688\n4    67              8.52         67      0.1 669.95900    3696958\n5    68              7.87         68      0.1  63.53723    2978599\n6    66              9.20         66      0.1 553.32894    2883167\n  thinness..1.19.years thinness.5.9.years Income.composition.of.resources\n1                 17.2               17.3                           0.479\n2                 17.5               17.5                           0.476\n3                 17.7               17.7                           0.470\n4                 17.9               18.0                           0.463\n5                 18.2               18.2                           0.454\n6                 18.4               18.4                           0.448\n  Schooling\n1      10.1\n2      10.0\n3       9.9\n4       9.8\n5       9.5\n6       9.2\n\n\n\n\n\n2.3.3 Đọc binary files vào R\n\n2.3.3.1 read_excel()\nDùng lệnh read_excel() trong package readxl để đọc các file excel (đuôi .xls hay .xlsx) . Xem lại cách cài đặt và sử dụng R packages tại Section 1.4.\n\nread_excel(path, sheet = NULL, col_names = TRUE)\n\nChúng ta có thể thấy tên các arguments của read_excel() hoàn toàn khác với read.table() hay read.csv().\n\npath: path của file data đầu vào.\nsheet: tên hoặc số thứ tự của sheet sẽ đọc vào R, nếu file có nhiều sheets.\ncol_names: dòng đầu tiên của file data có phải là tên cột không, giống argument header của read.table().\n\n\nlibrary(readxl)\ndf <- read_excel(path = \"data/gdp-capita.xlsx\", sheet = 1)\nhead(df)\n\n# A tibble: 6 × 10\n  `Country Name` `Country Code` `2015` `2016` `2017` `2018` `2019` `2020` `2021`\n  <chr>          <chr>           <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>\n1 Aruba          ABW            28419. 28450. 29329. 30918. 31903. 24008. 29128.\n2 Africa Easter… AFE             1554.  1444.  1625.  1558.  1508.  1356.  1546.\n3 Afghanistan    AFG              567.   523.   526.   492.   498.   512.   356.\n4 Africa Wester… AFW             1882.  1649.  1590.  1735.  1812.  1688.  1767.\n5 Angola         AGO             3217.  1810.  2439.  2541.  2191.  1451.  1927.\n6 Albania        ALB             3953.  4124.  4531.  5288.  5396.  5343.  6377.\n# ℹ 1 more variable: `2022` <dbl>\n\n\n\n\n\n\n\n\nLưu ý\n\n\n\nMột lỗi thường gặp với file excel là R đọc các file có merged cells không tốt. Vì vậy khi nhập data, nên tránh làm merged cells.\n\n\n\n\n2.3.3.2 File SPSS, Stata, SAS\nDùng các lệnh read_sav() (SPSS), read_dta() (Stata) và read_sas() (SAS) trong package haven.\n\nlibrary(haven)\ndf <- read_dta(file = \"data/linelist-raw.dta\")\nhead(df)\n\n# A tibble: 6 × 28\n  case_id generation infection_date      date_onset hosp_date          \n  <chr>        <dbl> <dttm>              <chr>      <dttm>             \n1 5fe599           4 2014-05-08 00:00:00 2014-05-13 2014-05-15 00:00:00\n2 8689b7           4 NA                  2014-05-13 2014-05-14 00:00:00\n3 11f8ea           2 NA                  2014-05-16 2014-05-18 00:00:00\n4 b8812a           3 2014-05-04 00:00:00 2014-05-18 2014-05-20 00:00:00\n5 893f25           3 2014-05-18 00:00:00 2014-05-21 2014-05-22 00:00:00\n6 be99c8           3 2014-05-03 00:00:00 2014-05-22 2014-05-23 00:00:00\n# ℹ 23 more variables: date_of_outcome <dttm>, outcome <chr>, gender <chr>,\n#   hospital <chr>, lon <dbl>, lat <dbl>, infector <chr>, source <chr>,\n#   age <chr>, age_unit <chr>, row_num <dbl>, wt_kg <dbl>, ht_cm <dbl>,\n#   ct_blood <dbl>, fever <chr>, chills <chr>, cough <chr>, aches <chr>,\n#   vomit <chr>, temp <dbl>, time_admission <chr>, merged_header <chr>,\n#   x28 <chr>"
  },
  {
    "objectID": "clean.html#data-gọn-gàng-tidy-data",
    "href": "clean.html#data-gọn-gàng-tidy-data",
    "title": "4  Làm sạch",
    "section": "4.1 Data gọn gàng (tidy data)",
    "text": "4.1 Data gọn gàng (tidy data)\nDữ liệu gọn gàng có các đặc điểm sau:1\n\nMỗi biến là một cột; mỗi cột là một biến\nMỗi quan sát là một hàng; mỗi hàng là một quan sát\nMỗi giá trị nằm trong một ô; mỗi ô chứa một giá trị duy nhất\n\nChúng ta sẽ dùng data gdp-capita.xlsx\n\nlibrary(readxl)\nlibrary(janitor)\n\n\nAttaching package: 'janitor'\n\n\nThe following objects are masked from 'package:stats':\n\n    chisq.test, fisher.test\n\nlibrary(tidyverse)\n\nWarning: package 'dplyr' was built under R version 4.3.1\n\n\nWarning: package 'stringr' was built under R version 4.3.1\n\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.0     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n\n\n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n\ndf <- read_excel(path = \"data/gdp-capita.xlsx\", sheet = 1)\n\n\n4.1.1 Format bảng\nBảng dữ liệu hiện tại chưa tuân theo quy tắc tidy data vì các cột 2015 - 2022 không phải là biến và mỗi hàng đang chứa nhiều quan sát (quan sát cho các năm từ 2015 - 2022).\nHiện tại bảng dữ liệu đang ở định dạng ngang (wide), khi nhiều quan sát của cùng chủ thể (trong VD này là các quốc gia) được lưu trữ trong một hàng duy nhất. Điều này có thể hữu ích cho việc hiển thị, tuy nhiên không lý tưởng cho việc phân tích.\nĐể tuân theo quy tắc tidy data, ta cần format bảng dữ liệu sang định dạng dọc (long)\nĐể format bảng dữ liệu trong R, ta có thể sử dụng các lệnh sau.\n\npivot_longer() - chuyển dữ liệu từ dạng ngang sang dọc.\npivot_wider() - chuyển dữ liệu từ dạng dọc sang ngang.\n\n\n\ndf <- df %>% \n  pivot_longer(\n    cols = starts_with(\"2\"),\n    # đặt tên mới cho biến\n    names_to = \"year\",\n    # đặt tên mới cho cột giá trị tương ứng\n    values_to = \"gdp\")\n\n\n\n4.1.2 Tên cột\nTrong R, tên cột là giá trị trên đỉnh của một cột.\nCác quy tắc cho tên cột thường bao gồm:\n\nTên ngắn\nKhông có khoảng trắng (thay thế bằng dấu gạch dưới _ ).\nKhông có ký tự đặc biệt (&, #, <, >, …) hoặc dấu.\nKhông bắt đầu bằng số.\n\nLệnh clean_names() của package janitor được sử dụng để tự động hoá quá trình chuẩn hoá tên cột. Ngoài ra, lệnh rename() của package dplyr được sử dụng để thay đổi tên cột một cách thủ công.\n\n# chuẩn hoá tên cột tự động\ndf <- clean_names(df)"
  },
  {
    "objectID": "clean.html#tên-cột",
    "href": "clean.html#tên-cột",
    "title": "4  Làm sạch",
    "section": "4.3 Tên cột",
    "text": "4.3 Tên cột\nTrong R, tên cột là giá trị trên đỉnh của một cột.\nCác quy tắc cho tên cột thường bao gồm:\n- Tên ngắn\n- Không có khoảng trắng (thay thế bằng dấu gạch dưới _ ).\n- Không có ký tự đặc biệt (&, #, <, >, …) hoặc dấu.\n- Không bắt đầu bằng số.\nLệnh clean_names() của package janitor được sử dụng để tự động hoá quá trình chuẩn hoá tên cột. Ngoài ra, lệnh rename() của package dplyr được sử dụng để thay đổi tên cột một cách thủ công.\n\n# chuẩn hoá tên cột tự động\ndf <- clean_names(df)"
  },
  {
    "objectID": "clean.html#kết-hợp-dữ-liệu",
    "href": "clean.html#kết-hợp-dữ-liệu",
    "title": "4  Làm sạch",
    "section": "4.2 Kết hợp dữ liệu",
    "text": "4.2 Kết hợp dữ liệu\nTrong nhiều trường hợp, dữ liệu bị chia thành nhiều bảng khác nhau và để phân tích thì chúng ta phải kết hợp các bảng lại.\nĐể nối 2 bảng với nhau trong R, ta sử dụng 1 trong các lệnh join của package dplyr sau đây\n\n\n\n\n\n\n\n\nFunction\nCông dụng\nGIF minh hoạ\n\n\n\n\nleft_join()\nNối ngoài bên trái\n\n\n\nright_join()\nNối ngoài bên phải\n\n\n\ninner_join()\nNối trong\n\n\n\nfull_join()\nNối ngoài\n\n\n\n\nĐể sử dụng lệnh join, ta cần cung cấp cho R các thông tin sau:\n\n2 bảng cần nối\ncác cột chung để nối bằng lệnh join_by (R mặc định nối 2 bảng bằng cột có tên giống nhau)\n\nTổng hợp các lệnh join cùng GIF minh hoạ\n\nmt <- read_excel(path = \"data/gdp-capita.xlsx\", sheet = 2) %>% \n  clean_names()\n\n# --- Nối 2 bảng bằng lệnh left_join\n# Trong trường hợp này, tuy lệnh join_by không cần thiết nhưng có thể giúp cho code rõ ràng hơn \nleft_join(df, mt, by = join_by(country_code == country_code))\n\n# A tibble: 2,128 × 8\n   country_name      country_code year     gdp region income_group special_notes\n   <chr>             <chr>        <chr>  <dbl> <chr>  <chr>        <chr>        \n 1 Aruba             ABW          2015  28419. Latin… High income  <NA>         \n 2 Aruba             ABW          2016  28450. Latin… High income  <NA>         \n 3 Aruba             ABW          2017  29329. Latin… High income  <NA>         \n 4 Aruba             ABW          2018  30918. Latin… High income  <NA>         \n 5 Aruba             ABW          2019  31903. Latin… High income  <NA>         \n 6 Aruba             ABW          2020  24008. Latin… High income  <NA>         \n 7 Aruba             ABW          2021  29128. Latin… High income  <NA>         \n 8 Aruba             ABW          2022  33301. Latin… High income  <NA>         \n 9 Africa Eastern a… AFE          2015   1554. <NA>   <NA>         26 countries…\n10 Africa Eastern a… AFE          2016   1444. <NA>   <NA>         26 countries…\n# ℹ 2,118 more rows\n# ℹ 1 more variable: table_name <chr>"
  },
  {
    "objectID": "clean.html#dữ-liệu-ngày-tháng",
    "href": "clean.html#dữ-liệu-ngày-tháng",
    "title": "3  Làm sạch",
    "section": "3.4 Dữ liệu ngày tháng",
    "text": "3.4 Dữ liệu ngày tháng\n\n\n\n\n1. Wickham, H. Tidy Data. Journal of Statistical Software 59, (2014)."
  },
  {
    "objectID": "analysis.html",
    "href": "analysis.html",
    "title": "5  Phân tích",
    "section": "",
    "text": "gtsummary\nCác phép kiểm thường dùng\nSo sánh"
  },
  {
    "objectID": "viz-practice.html#biểu-đồ-mẫu",
    "href": "viz-practice.html#biểu-đồ-mẫu",
    "title": "7  Thực hành trực quan hóa",
    "section": "7.1 Biểu đồ mẫu",
    "text": "7.1 Biểu đồ mẫu\nBiểu đồ dưới đây nằm trong bài báo “Mapping routine measles vaccination in low- and middle-income countries”1 được đăng trên tạp chí Nature (IF 2022 = 64.8). Biểu đồ thể hiện tương quan giữa sự thay đổi bất bình đẳng địa lý và sự thay đổi độ phủ vaccine MCV1 của các quốc gia thu nhập thấp và trung bình từ năm 2000 đến năm 2019.\n\nChúng ta sẽ vẽ lại biểu đồ này bằng ggplot. Để đơn giản, chúng ta bỏ bớt một số chi tiết và sẽ vẽ biểu đồ sau:\n\n\n7.1.1 Các bước thực hành\nĐầu tiên cần gọi library ggplot để vẽ biểu đồ và ggsci cho bảng màu.\n\nlibrary(ggplot2)\nlibrary(ggsci)\n\nNhìn vào biểu đồ, chúng ta thấy trục x (nằm ngang) là sự thay đổi độ phủ vaccine, trục y (nằm dọc) là sự thay đổi bất bình đẳng địa lý. Có 10 quốc gia được hiển thị tên là Angola, Papua New Guinea, Pakistan, Chad, Ethiopia, Kenya, Nigeria, Liberia, Burkina Faso, India.\nVậy chúng ta cần một data frame có ít nhất 3 cột: (1) tên quốc gia, (2) sự thay đổi độ phủ vaccine, (3) sự thay đổi bất bình đẳng địa lý.\n\ncountry <- c(\"Angola\", \"Papua New Guinea\", \"Pakistan\", \"Chad\", \"Ethiopia\", \"Kenya\", \"Nigeria\", \"Liberia\", \"Burkina Faso\", \"India\")\ncoverage <- c(-0.11, -0.35, 0.12, 0.14, 0.32, 0.07, 0.2, 0.18, 0.3, 0.35)\ninequality <- c(0.1, 0.08, 0.05, 0.01, 0.005, -0.06, -0.07, -0.11, -0.13, -0.16)\ndf_plot <- data.frame(country, coverage, inequality)\ndf_plot\n\n            country coverage inequality\n1            Angola    -0.11      0.100\n2  Papua New Guinea    -0.35      0.080\n3          Pakistan     0.12      0.050\n4              Chad     0.14      0.010\n5          Ethiopia     0.32      0.005\n6             Kenya     0.07     -0.060\n7           Nigeria     0.20     -0.070\n8           Liberia     0.18     -0.110\n9      Burkina Faso     0.30     -0.130\n10            India     0.35     -0.160\n\n\nChúng ta sẽ vẽ biểu đồ cho 10 quốc gia này trước. Dạng biểu đồ scatterplot trong ggplot tương ứng với geom_point().\n\nggplot(df_plot, aes(x = coverage, y = inequality)) +\n  geom_point()\n\n\n\n\nĐể hiển thị tên quốc gia, chúng ta thêm geom_text() với label là tên nước (country).\n\nggplot(df_plot, aes(x = coverage, y = inequality)) +\n  geom_point() +\n  geom_text(aes(label = country))\n\n\n\n\nHiện giờ chữ đang đè lên các điểm, chúng ta điều chỉnh vị trí của chữ bằng arguments hjust và vjust của geom_text(). Một số tên nước bị cắt mất như Papua New Guinea, chúng ta điều chỉnh lại giới hạn hiển thị của các trục tọa độ bằng xlim(), ylim() để hiển thị lại đầy đủ.\n\nggplot(df_plot, aes(x = coverage, y = inequality)) +\n  geom_point() +\n  geom_text(aes(label = country), hjust = -0.2, vjust = 0.2) +\n  xlim(c(-0.35, 0.55)) +\n  ylim(c(-0.17, 0.1))\n\n\n\n\nCác điểm trong biểu đồ gốc có màu sắc và kích thước to nhỏ khác nhau, vậy trong data frame cần có thêm 1 cột màu sắc và 1 cột kích thước.\n\ndf_plot$size <- c(1.1, 0.6, 3, 1, 2, 1.1, 3, 0.7, 1.1, 8)\ndf_plot$color <- c(1, 2, 3, 1, 1, 1, 1, 1, 1, 3)\ndf_plot\n\n            country coverage inequality size color\n1            Angola    -0.11      0.100  1.1     1\n2  Papua New Guinea    -0.35      0.080  0.6     2\n3          Pakistan     0.12      0.050  3.0     3\n4              Chad     0.14      0.010  1.0     1\n5          Ethiopia     0.32      0.005  2.0     1\n6             Kenya     0.07     -0.060  1.1     1\n7           Nigeria     0.20     -0.070  3.0     1\n8           Liberia     0.18     -0.110  0.7     1\n9      Burkina Faso     0.30     -0.130  1.1     1\n10            India     0.35     -0.160  8.0     3\n\n\nBây giờ chúng ta có thể thêm màu sắc và kích thước vào geom_point().\n\nggplot(df_plot, aes(x = coverage, y = inequality)) +\n  geom_point(aes(size = size, color = color)) +\n  geom_text(aes(label = country), hjust = -0.2, vjust = 0.2) +\n  xlim(c(-0.35, 0.55)) +\n  ylim(c(-0.17, 0.1))\n\n\n\n\nCác quốc gia chính đã được vẽ xong, chúng ta cần có các điểm khác trên biểu đồ mà không có tên quốc gia. Có thể tạo ra các điểm ngẫu nhiên như vậy bằng R.\n\nset.seed(123)\nnp <- 50\nrd <- data.frame(country = rep(\"\", np),\n                 coverage = rnorm(n = np, mean = 0.1, sd = 0.12),\n                 inequality = rnorm(n = np, mean = -0.05, sd = 0.04),\n                 size = rnorm(n = np, mean = 1, sd = 0.4),\n                 color = sample(1:6, np, replace = T))\nhead(rd)\n\n  country   coverage   inequality      size color\n1         0.03274292 -0.039867259 0.7158374     2\n2         0.07237870 -0.051141870 1.1027535     2\n3         0.28704500 -0.051714818 0.9013232     1\n4         0.10846101  0.004744091 0.8609830     2\n5         0.11551453 -0.059030839 0.6193526     1\n6         0.30580780  0.010658824 0.9819889     5\n\n\n\nset.seed(123): dùng để cố định cách tạo ra các điểm ngẫu nhiên.\nnp <- 50: tạo ra 50 điểm ngẫu nhiên.\ncountry = rep(\"\", np): các điểm này không có tên quốc gia.\ncoverage = rnorm(n = np, mean = 0.1, sd = 0.12): sự thay đổi độ phủ vaccine (giá trị trên trục x) của các điểm này là số thực được tạo ra ngẫu nhiên theo phân phối bình thường với trung bình là 0.1 và độ lệch chuẩn là 0.12.\ninequality = rnorm(n = np, mean = -0.05, sd = 0.04): sự thay đổi bất bình đẳng địa lý (giá trị trên trục y) của các điểm này là số thực được tạo ra ngẫu nhiên theo phân phối bình thường với trung bình là -0.05 và độ lệch chuẩn là 0.04.\nsize = rnorm(n = np, mean = 1, sd = 0.4): kích thước của các điểm này là số thực được tạo ra ngẫu nhiên theo phân phối bình thường với trung bình là 1 và độ lệch chuẩn là 0.4.\ncolor = sample(1:6, np, replace = T): màu sắc là số nguyên ngẫu nhiên từ 1 đến 6.\n\nBây giờ chúng ta ghép data frame rd này với data frame của biểu đồ df_plot. Cột màu sắc được đưa về dạng factor để hiển thị màu. Sau đó dùng code ggplot trên để vẽ.\n\ndf_plot <- rbind(df_plot, rd)\ndf_plot$color <- factor(df_plot$color)\nggplot(df_plot, aes(x = coverage, y = inequality)) +\n  geom_point(aes(size = size, color = color)) +\n  geom_text(aes(label = country), hjust = -0.2, vjust = 0.2) +\n  xlim(c(-0.35, 0.55)) +\n  ylim(c(-0.17, 0.1))\n\n\n\n\n\n\n7.1.2 Kết quả\nBiểu đồ được tạo ra đã tương đối giống biểu đồ gốc. Chúng ta có thể thêm các đường thẳng x = 0, y = 0, chọn bảng màu, chỉnh lại kích thước các điểm, chọn lại theme cho biểu đồ để nhìn giống biểu đồ gốc hơn.\n\nggplot(df_plot, aes(x = coverage, y = inequality)) +\n  geom_point(aes(size = size, color = color), alpha = 0.8) +\n  geom_text(aes(label = country), hjust = -0.2, vjust = 0.2) +\n  xlim(c(-0.35, 0.55)) +\n  ylim(c(-0.17, 0.1)) +\n  geom_vline(xintercept = 0) +\n  geom_hline(yintercept = 0) +\n  scale_color_npg() +\n  scale_size_continuous(range = c(0, 10)) +\n  theme_classic() +\n  theme(legend.position = \"none\")\n\n\n\n\n\n\n\n\n\n\nBài tập\n\n\n\nThay đổi tiêu đề của các trục tọa độ và chú thích kích thước điểm, màu cho giống với biểu đồ mẫu. Đặt phần chú thích ở trên biểu đồ giống như biểu đồ mẫu.\n\n\n\n\n\n\n1. Mapping routine measles vaccination in low- and middle-income countries. Nature 589, 415–419 (2020)."
  },
  {
    "objectID": "references.html",
    "href": "references.html",
    "title": "References",
    "section": "",
    "text": "1. Ihaka, R. The R\nProject: A Brief History and Thoughts About the Future.\n(1998).\n\n\n2. Ihaka, R. & Gentleman, R. R: A Language for\nData Analysis and Graphics. Journal of Computational and\nGraphical Statistics 5, 299–314 (1996).\n\n\n3. Lenovo, Inc. Programming\nLanguage: What is a programming language? (2024).\n\n\n4. Wickham, H. Tidy Data. Journal\nof Statistical Software 59, (2014).\n\n\n5. Mapping routine\nmeasles vaccination in low- and middle-income countries.\nNature 589, 415–419 (2020)."
  },
  {
    "objectID": "clean.html#format-bảng",
    "href": "clean.html#format-bảng",
    "title": "4  Làm sạch",
    "section": "4.2 Format bảng",
    "text": "4.2 Format bảng\nBảng dữ liệu hiện tại chưa tuân theo quy tắc tidy data vì các cột 2015 - 2022 không phải là biến và mỗi hàng đang chứa nhiều quan sát (quan sát cho các năm từ 2015 - 2022).\nHiện tại bảng dữ liệu đang ở định dạng ngang (wide), khi nhiều quan sát của cùng chủ thể (trong VD này là các quốc gia) được lưu trữ trong một hàng duy nhất. Điều này có thể hữu ích cho việc hiển thị, tuy nhiên không lý tưởng cho việc phân tích.\nĐể tuân theo quy tắc tidy data, ta cần format bảng dữ liệu sang định dạng dọc (long)\nĐể format bảng dữ liệu trong R, ta có thể sử dụng các lệnh sau.\n- pivot_longer() - chuyển dữ liệu từ dạng ngang sang dọc.\n- pivot_wider() - chuyển dữ liệu từ dạng dọc sang ngang.\n\n\ndf <- df %>% \n  pivot_longer(\n    cols = starts_with(\"2\"),\n    # đặt tên mới cho biến\n    names_to = \"year\",\n    # đặt tên mới cho cột giá trị tương ứng\n    values_to = \"gdp\")"
  },
  {
    "objectID": "r_basics.html#đối-tượng-trong-r",
    "href": "r_basics.html#đối-tượng-trong-r",
    "title": "3  Nhập môn R",
    "section": "3.1 Đối tượng trong R",
    "text": "3.1 Đối tượng trong R\nMọi thứ được lưu trữ trong R - bao gồm bộ dữ liệu, biến số, danh sách tên cột, kết quả đầu ra như biểu đồ - đều là các đối tượng, được gán tên và có thể được tham chiếu trong các lệnh sau đó.\nĐể tạo đối tượng trong R, ta dùng cú pháp sau\n\ntên_đối_tượng <- giá_trị_của_đối_tượng \n\nVD:\n\n# tạo đối tượng file_path để lưu trữ đường dẫn đến file excel\nfile_path <- \"data/gdp-capita.xlsx\"\n\n# tạo đối tượng df lưu trữ bảng dữ liệu đọc từ file excel\ndf <- read_excel(path = file_path, sheet = 1)\n\nSau khi tạo 2 đối tượng file_path và df, ta có thể thử xem giá trị được lưu trữ\n\nfile_path\n\n[1] \"data/gdp-capita.xlsx\"\n\ndf\n\n# A tibble: 266 × 10\n   `Country Name`       `Country Code` `2015` `2016` `2017` `2018` `2019` `2020`\n   <chr>                <chr>           <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>\n 1 Aruba                ABW            28419. 28450. 29329. 30918. 31903. 24008.\n 2 Africa Eastern and … AFE             1554.  1444.  1625.  1558.  1508.  1356.\n 3 Afghanistan          AFG              567.   523.   526.   492.   498.   512.\n 4 Africa Western and … AFW             1882.  1649.  1590.  1735.  1812.  1688.\n 5 Angola               AGO             3217.  1810.  2439.  2541.  2191.  1451.\n 6 Albania              ALB             3953.  4124.  4531.  5288.  5396.  5343.\n 7 Andorra              AND            38886. 39931. 40632. 42905. 41329. 37207.\n 8 Arab World           ARB             6287.  6118.  6231.  6579.  6505.  5644.\n 9 United Arab Emirates ARE            41525. 41055. 43064. 46722. 45376. 37629.\n10 Argentina            ARG            13789. 12790. 14613. 11795.  9964.  8501.\n# ℹ 256 more rows\n# ℹ 2 more variables: `2021` <dbl>, `2022` <dbl>\n\n\n\n\n\n\n\n\nLưu ý\n\n\n\nGiá trị của một đối tượng có thể bị ghi đè bất kỳ lúc nào bằng cách chạy lệnh gán để định nghĩa lại giá trị của nó. Do đó, thứ tự của các lệnh được chạy rất quan trọng.\n\n\nLệnh sau sẽ định nghĩa lại giá trị cho đối tượng file_path\n\nfile_path <- \"data/new_path.xlsx\"\n\n# kiểm tra giá trị \nfile_path\n\n[1] \"data/new_path.xlsx\""
  },
  {
    "objectID": "r_basics.html#câu-văn-trong-r",
    "href": "r_basics.html#câu-văn-trong-r",
    "title": "3  Nhập môn R",
    "section": "3.2 Câu văn trong R",
    "text": "3.2 Câu văn trong R\nCâu lệnh (command) hoặc hàm (function) chính là những câu văn trong R để giao tiếp với máy tính. Chúng ta phải học ngữ pháp của 1 câu lệnh và ý nghĩa của nó để có thể sử dụng R để ra lệnh cho máy tính. Một câu lệnh trong R thường có dạng như sau:\n\ntên-câu-lệnh(tên-tham-số = data-đầu-vào hoặc lựa-chọn)\n\n\nTên câu lệnh: nằm trước dấu (), thể hiện ý nghĩa câu lệnh dùng để làm gì.\nTên tham số (argument): nằm trong dấu () là những tham số của câu lệnh đó. Tham số là những yêu cầu nhỏ và cụ thể để máy tính hiểu rõ hơn yêu cầu của người dùng.\nDấu =: dùng để gán 1 giá trị cho tham số. Giá trị gán cho tham số có thể là một data đầu vào, hoặc một lựa chọn của người dùng (đúng/sai).\n\nVí dụ:\n\nmean(x = df$col1, na.rm = TRUE)\n\n\nTên câu lệnh là mean: chúng ta đang yêu cầu máy tính hãy tính giá trị trung bình của 1 biến.\nCác tham số là x và na.rm:\n\nx: là data đầu vào, ở đây chúng ta viết x = df$col1 để cho máy tính biết data đầu vào là cột col1 trong bảng data df.\nna.rm: là yêu cầu cụ thể cách giải quyết khi gặp missing value (NA), ở đây chúng ta lựa chọn na.rm = TRUE nghĩa là nếu cột col1 có NA thì bỏ những giá trị NA đi trước khi tính trung bình.\n\n\n\n\n\n\n\n\nTip\n\n\n\nĐể đọc hướng dẫn sử dụng về câu lệnh, gõ ?tên-câu-lệnh."
  },
  {
    "objectID": "r_basics.html#loại-dữ-liệu-datatype",
    "href": "r_basics.html#loại-dữ-liệu-datatype",
    "title": "3  Nhập môn R",
    "section": "3.3 Loại dữ liệu (datatype)",
    "text": "3.3 Loại dữ liệu (datatype)\n\n3.3.1 Các datatype trong R\n\n\n\n\n\n\n\nDatatype\nÝ nghĩa\n\n\n\n\nnumeric\ndữ liệu dạng số nguyên\n\n\ndouble\ndữ liệu dạng số thập phân\n\n\nlogical\ndữ liệu dạng đúng/sai (TRUE/FALSE)\n\n\ncharacter\ndữ liệu dạng ký tự (hay còn gọi là string), được đặt trong dấu ngoặc kép. Đối tượng dạng ký tự thì không thể tính toán\n\n\nDate\ndữ liệu ngày tháng\n\n\nfactor\ndữ liệu dạng phân loại (categorical)\n\n\ndata.frame\ndữ liệu dạng bảng\n\n\ntibble\ndữ liệu dạng bảng tương tự như data.frame, sự khác biệt chính là tibble in đẹp hơn trong R console\n\n\n\n\n\n\n\n\n\nTip\n\n\n\nĐể kiểm tra datatype, sử dụng lệnh class(tên_đối_tượng)\n\n\n\n\n3.3.2 Chuyển đổi datatype\nCú pháp chung cho thay đổi datatype là as.datatype()\nVí dụ như:\n\nas.numeric() chuyển thành định dạng số.\nas.character() chuyển thành định dạng văn bản.\nas.factor() chuyển thành định dạng factor.\nas.Date() chuyển thành định dạng ngày.\n\nNgoài ra, còn có các lệnh khác để phục vụ cho các mục đích cụ thể hơn, bao gồm:\nifelse() chuyển thành định dạng logical theo điều kiện nhất định\nis.na() chuyển thành định dạng logical, các dữ liệu trống (NA) có giá trị TRUE và ngược lại.\ndmy(), ymd(), mdy(), … chuyển đổi string theo các format khác nhau thành định dạng ngày\nVD:\n\n# tạo danh sách mẫu\nexample_list <- c(\"1\", \"2\", \"3\", \"4\", \"5\")\n# thử sử dụng lệnh mean\nmean(example_list)\n\nWarning in mean.default(example_list): argument is not numeric or logical:\nreturning NA\n\n\n[1] NA\n\n# kiểm tra datatype \nclass(example_list)\n\n[1] \"character\"\n\n# TODO: thực hành điều chỉnh example_list để không còn Warning"
  },
  {
    "objectID": "r_basics.html#làm-việc-với-data.frame",
    "href": "r_basics.html#làm-việc-với-data.frame",
    "title": "3  Nhập môn R",
    "section": "3.4 Làm việc với data.frame",
    "text": "3.4 Làm việc với data.frame\n\n3.4.1 Lấy dữ liệu theo hàng/cột\n\nCú pháp: tên_bảng_dữ_liệu[hàng, cột]. Trong đó cột có thể là số thứ tự của cột hoặc tên cột.\nĐể lấy toàn bộ hàng thì để trống cột và ngược lại\nĐể lấy nhiều cột hay hàng thì cho tên cột hay hàng theo dạng list (chuỗi)\n\n\n# lấy dữ liệu tại hàng thứ 5, cột thứ 2\ndf[5 ,2]\n\n# lấy dữ liệu tại hàng thứ 5, cột thứ 2\ndf[5 , \"Country Code\"]\n\n# lấy hàng thứ 5 trong bảng df\ndf[5, ]\n\n#lấy các cột Country Name, Country Code, 2015\ndf[, c(\"Country Name\", \"Country Code\", \"2015\")] \n\n#lấy 10 hàng đầu tiên của các cột Country Name, Country Code, 2015\n#1:10 là cú pháp nhanh để tạo chuỗi từ 1 đến 10\ndf[1:10, c(\"Country Name\", \"Country Code\", \"2015\")] \n\n\n\n\n\n\n\nNote\n\n\n\nĐối với cột, còn có cách trích xuất thông dụng khác bằng cách sử dụng dấu $. Tuy nhiên, cách này sẽ chỉ trích xuất giá trị trong 1 cột.\nVD: df$col1 sẽ trả về các giá trị trong cột col1 của bảng df\n\n\n\n\n3.4.2 Chuyển đổi datatype cho cột\nMỗi cột trong data.frame sẽ chứa các giá trị có cùng datatype.\nĐể thay đổi datatype của cột, ta có thể áp dụng các function từ phần trước.\nVD:\n\n# đổi cột country code thành biến phân loại\ndf$`Country Code` <- as.factor(df$`Country Code`)\n\n\n\n\n\n\n\nLưu ý\n\n\n\n\nDấu <- được sử dụng ở VD trên để gán giá trị mới vào cột Country Code (tương đương việc UPDATE cột)\nNếu không sử dụng <- thì R chỉ trả về kết quả của function as.factor và bảng df sẽ không có thay đổi\n\n\n\n\n\n3.4.3 Lọc dữ liệu\nFunction filter() được sử dụng cho việc lọc dữ liệu theo điều kiện\nMột số ký tự thường được sử dụng cho filter bao gồm:\n\n\n\nKý tự\nÝ nghĩa\n\n\n\n\nx == y\nx bằng y\n\n\nx != y\nx không bằng y\n\n\ny < x\nx nhỏ hơn y\n\n\ny <= x\nx nhỏ hơn hoặc bằng y\n\n\nis.na(x)\nx trống\n\n\nA & B\nA và B\n\n\nA | B\nA hoặc B\n\n\n!\nKhông là (NOT)\n\n\n\n\n# Lọc các hàng có country code là ABW\ndf %>% filter(`Country Code` == \"ABW\") \n\n# Lọc các hàng có GDP năm 2015 hơn 2000\ndf %>% filter(`2015` > 2000)\n\n# Lọc các hàng có country code là ABW hoặc GDP năm 2015 hơn 2000\ndf %>% filter((`Country Code` == \"ABW\") | (`2015` > 2000))\n\n# Lọc các hàng có country code là ABW và GDP năm 2015 hơn 2000\ndf %>% filter((`Country Code` == \"ABW\") & (`2015` > 2000))\n\n\n\n\n\n\n\nDấu %>% (pipe)\n\n\n\n%>% được dùng để chuyển đối tượng vào 1 function (trong VD trên, %>% chuyển df vào function filter)\n%>% còn thường được dùng để chuyển các kết quả trung gian sang function tiếp theo, từ đó có thể dùng để nối 1 chuỗi các function để thao tác trên 1 đối tượng\n\nVD: lọc các hàng có GDP năm 2015 > 2000 và sắp xếp các hàng theo GPD từ thấp đến cao\n\ndf %>% # chuyển df vào filter()\n  filter(`2015` > 2000) %>% # chuyển kết quả của filter() vào arrange()\n  arrange(`2015`)"
  },
  {
    "objectID": "r_basics.html#dữ-liệu-string",
    "href": "r_basics.html#dữ-liệu-string",
    "title": "3  Nhập môn R",
    "section": "3.5 Dữ liệu string",
    "text": "3.5 Dữ liệu string\nGói stringr (1 trong các package trong tidyverse) thường được sử dụng để xử lý các dữ liệu dạng string.\nNgoài ra, R còn có package stringi dành cho các mục đích cụ thể khác (VD như xử lý dấu, cách mã hoá văn bản, … )\n\n\n\n\n\n\n\n\nFunction\nPackage\nCông dụng\n\n\ntolower\nbase\nbiến thành chữ thường\n\n\ntoupper\nbase\nbiến thành chữ hoa\n\n\nstr_to_title\nstringr\nin hoa chữ cái đầu tiên của từng từ\n\n\nstri_trans_general\nstringi\nloại bỏ dấu\n\n\n\nVD: chuyển Country code sang chữ in thường\n\ndf %>% \n  mutate(\n    `Country Code` = tolower(`Country Code`)\n  )\n\n# A tibble: 266 × 10\n   `Country Name`       `Country Code` `2015` `2016` `2017` `2018` `2019` `2020`\n   <chr>                <chr>           <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>\n 1 Aruba                abw            28419. 28450. 29329. 30918. 31903. 24008.\n 2 Africa Eastern and … afe             1554.  1444.  1625.  1558.  1508.  1356.\n 3 Afghanistan          afg              567.   523.   526.   492.   498.   512.\n 4 Africa Western and … afw             1882.  1649.  1590.  1735.  1812.  1688.\n 5 Angola               ago             3217.  1810.  2439.  2541.  2191.  1451.\n 6 Albania              alb             3953.  4124.  4531.  5288.  5396.  5343.\n 7 Andorra              and            38886. 39931. 40632. 42905. 41329. 37207.\n 8 Arab World           arb             6287.  6118.  6231.  6579.  6505.  5644.\n 9 United Arab Emirates are            41525. 41055. 43064. 46722. 45376. 37629.\n10 Argentina            arg            13789. 12790. 14613. 11795.  9964.  8501.\n# ℹ 256 more rows\n# ℹ 2 more variables: `2021` <dbl>, `2022` <dbl>\n\n\n\n\n\n\n\n\nLệnh mutate\n\n\n\nmutate được sử dụng để chỉnh sửa giá trị của cột hoặc tạo cột mới\n\n\n\n3.5.1 Các hàm thông dụng của stringr\n\n\n\n\n\n\n\nFunction\nCông dụng\n\n\nstr_starts\nlọc hàng bắt đầu bằng chuỗi ký tự khớp với pattern\n\n\nstr_ends\nlọc hàng kết thúc bằng bằng chuỗi ký tự khớp với pattern\n\n\nstr_detect\nlọc hàng có chứa chuỗi ký tự khớp với pattern\n\n\nstr_interp\nchèn giá trị vào string (string interpolation)\n\n\nstr_extract\ntrích 1 chuỗi con (substring) đầu tiên khớp với pattern\n\n\nstr_extract_all\ntrích tất cả các chuỗi con (substring) khớp với pattern\n\n\nstr_remove\nxoá 1 chuỗi con (substring) đầu tiên khớp với pattern\n\n\nstr_remove_all\nxoá tất cả các chuỗi con (substring) khớp với pattern\n\n\nstr_replace\nthay thế 1 chuỗi con (substring) đầu tiên khớp với pattern bằng 1 chuỗi mới \n\n\nstr_replace_all\nthay thế tất cả chuỗi con (substring) khớp với pattern bằng 1 chuỗi mới \n\n\n\n\n stringr functions\n\n\n\n3.5.2 Regex\nTrong R, regex là 1 ngôn ngữ ngắn gọn để mô tả các patterns trong string\nCó bốn công cụ cơ bản mà người dùng có thể sử dụng để tạo một biểu thức chính quy cơ bản:\n\nNhóm\n\n\n\nBộ ký tự\nSiêu ký tự\nBộ định lượng\n\nNhóm chỉ định các chuỗi cần khớp. Thường được viết trong() và phân cách bởi dấu | VD: \"(Quận|Huyện)\" - quy định cần khớp chữ \"Quận\" hay \"Huyện\".\nBộ ký tự string được đánh giá khớp tìm thấy bất kỳ ký tự nào trong dấu ngoặc [ ] trong chuỗi. Vd, để tìm string chứa các nguyên âm, người ta có thể sử dụng bộ ký tự này: \"[aeiou]\".\nCác bộ ký tự đặc biệt trong R\n\n\n\nBộ ký tự\nÝ nghĩa\n\n\n\n\n\"[A-Z]\"\nbất kỳ chữ cái viết hoa đơn lẻ nào\n\n\n\"[a-z]\"\nbất kỳ chữ cái viết thường đơn lẻ nào\n\n\n\"[0-9]\"\nbất kỳ số nào\n\n\n\"[:alnum:]\"\nbất kỳ chữ cái và số nào\n\n\n\"[:digit:]\"\nbất kỳ chữ số nào\n\n\n\"[:alpha:]\"\nbất kỳ ký tự nào (viết hoa hoặc viết thường)\n\n\n\"[:upper:]\"\nbất kỳ ký tự viết hoa nào\n\n\n\"[:lower:]\"\nbất kỳ ký tự viết thường nào\n\n\n\nSiêu ký tự là phiên bản rút ngắn của 1 số bộ ký tự\n\n\n\nSiêu ký tự\nÝ nghĩa\n\n\n\n\n\"\\\\s\"\nkhoảng trắng đơn\n\n\n\"\\\\w\"\ntương đương “[:alnum:]”\n\n\n\"\\\\d\"\ntương đương “[:digit:]”"
  },
  {
    "objectID": "r_basics.html#dữ-liệu-ngày-tháng",
    "href": "r_basics.html#dữ-liệu-ngày-tháng",
    "title": "3  Nhập môn R",
    "section": "3.6 Dữ liệu ngày tháng",
    "text": "3.6 Dữ liệu ngày tháng\nĐối với dữ liệu dạng ngày tháng, package thông dụng nhất là lubridate (cũng là 1 phần của tidyverse).\n\n3.6.1 Các lệnh liên quan đến ngày tháng\n\n\n\n\n\n\n\n\nFunction\nCông dụng\nPackage\n\n\n\n\ndifftime()\ntính khoảng cách giữa hai mốc thời gian\nbase\n\n\nmonth()/year()\nlấy tháng/ năm\nlubridate\n\n\nquarter()\nchuyển ngày sang quý\nlubridate\n\n\ntoday()\nlấy ngày hiện tại\nlubridate\n\n\ndmy(), ymd(), mdy()\nchuyển string theo nhiều format khác nhau sang ngày\nlubridate\n\n\n\n\n lubridate functions"
  },
  {
    "objectID": "r_basics.html#lưu-bảng-dữ-liệu-sau-khi-chỉnh-sửa",
    "href": "r_basics.html#lưu-bảng-dữ-liệu-sau-khi-chỉnh-sửa",
    "title": "3  Nhập môn R",
    "section": "3.7 Lưu bảng dữ liệu sau khi chỉnh sửa",
    "text": "3.7 Lưu bảng dữ liệu sau khi chỉnh sửa\nR cho phép lưu lại dữ liệu với nhiều format khác nhau, bao gồm:\n\nRData - định dạng dữ liệu của R để lưu trữ nhiều đối tượng\nRDS - định dạng dữ liệu của R để lưu trữ 1 đối tượng\nexcel\n\n\n\n\n\n\n\nLưu ý\n\n\n\nTốc độ đọc file RData và RDS của R nhanh hơn rất nhiều so với việc đọc file excel.\nVì vậy, đối với các dữ liệu có số lượng lớn hoặc cần xử lý thêm trong R, nên lưu trữ dưới dạng RDS/Rdata.\n\n\nVD lưu dữ liệu\n\n# định nghĩa đường dẫn đến folder chứa data\ndata_path <- file.path(getwd(), \"data\")\n\n# lưu dưới dạng Rdata\nsave(df, file = file.path(data_path, \"rda_data.Rda\"))\n\n# lưu dưới dạng RDS\nsaveRDS(df, file = file.path(data_path, \"rds_data.Rds\"))\n\n# lưu dưới dạng file excel\nwrite_xlsx(df, path = file.path(data_path, \"excel_data.xlsx\"))\n\nĐọc dữ liệu được lưu\n\n# đọc file Rdata\nload(file.path(data_path, \"rda_data.Rda\"))\n\n# đọc file RDS\nreadRDS(file = file.path(data_path, \"rds_data.Rds\"))\n\n# đọc file excel\nread_excel(df, path = file.path(data_path, \"excel_data.xlsx\"))"
  },
  {
    "objectID": "clean.html#xử-lý-các-dữ-liệu-lỗi",
    "href": "clean.html#xử-lý-các-dữ-liệu-lỗi",
    "title": "4  Làm sạch",
    "section": "4.3 Xử lý các dữ liệu lỗi",
    "text": "4.3 Xử lý các dữ liệu lỗi\n\n4.3.1 Kiểm tra giá trị\nThường bao gồm các bước chính\n\nKiểm tra datatype\nKiểm tra các giá trị NA\nKiểm tra các khoảng giá trị của từng cột\n\n\n4.3.1.1 Kiểm tra datatype\nKhi đọc dữ liệu, R sẽ tự động đổi datatype của các cột sang dạng phù hợp nhất. Tuy nhiên, đôi lúc R sẽ chuyển thành datatype khác với mong muốn.\nMột số trường hợp có thể xảy ra lỗi bao gồm:\n\nCột số nhưng có 1 số hàng chứa chữ\nNgày theo format khác với format tiêu chuẩn của R (VD: as.Date(\"01-01-2014\"))\n\n\n\n4.3.1.2 Kiểm tra NA/ khoảng giá trị của từng cột\nTrong R có lệnh summary để người dùng có thể nhanh chóng kiểm tra các khoảng giá trị và số dữ liệu NA trong từng cột.\nNgoài ra, tuỳ vào bộ dữ liệu, có thể cần kiểm tra giá trị giữa các cột (VD: trong dữ liệu tiêm chủng có thể có mũi 2 trùng hoặc trước ngày tiêm mũi 1)\n\n\n\n\n4.3.2 Xử lý dữ liệu\n\nMã hoá lại dữ liệu\nXử lý các hàng có giá trị lỗi\nLọc trùng\n\n\n4.3.2.1 Mã hoá dữ liệu\nCác trường hợp có thể cần mã hoá lại dữ liệu:\n\nDữ liệu NA (trống)\nCác dữ liệu dạng TRUE/FALSE được hiển thị bằng cách khác trong dữ liệu gốc (VD: Đánh dấu X hoặc bỏ trống trong file excel)\n\nCác lệnh liên quan đến mã hoá dữ liệu:\n\nreplace_na thay thế giá trị NA bằng giá trị được cung cấp\nis.na chuyển thành định dạng logical, các dữ liệu trống (NA) có giá trị TRUE và ngược lại\nifelse mã hoá theo điều kiện đơn giản, chỉ có 2 trường hợp khi đáp ứng điều kiện hoặc không.\ncase_when mã hóa giá trị cho nhiều trường hợp nhất định\n\n\n# --- Thay thế các giá trị NA trong cột col1 thành \"default\"\ndf %>% \n  mutate(col1 = replace_na(\"default\"))\n\n# --- Thay thế các giá trị được đánh dấu trong col2 thành TRUE và ngược lại\ndf %>% \n  mutate(col2 = !is.na(col2))\n# Cách làm khác bằng ifelse\ndf %>% \n  mutate(col2 = ifelse(is.na(col2), FALSE, TRUE))\n\n\n\n4.3.2.2 Lọc trùng\nLệnh distinct của gói dplyr sẽ dữ lại 1 hàng duy nhất trong các hàng có giá trị bị trùng.\nLệnh distinct mặc định sẽ kiểm tra giá trị của tất cả các cột (2 hàng được đánh giá là trùng khi tất cả các trị của chúng giống nhau).\n\n\n\n\n1. Wickham, H. Tidy Data. Journal of Statistical Software 59, (2014)."
  },
  {
    "objectID": "clean.html#chọn-câu-lệnh-mindmap",
    "href": "clean.html#chọn-câu-lệnh-mindmap",
    "title": "4  Làm sạch",
    "section": "4.4 Chọn câu lệnh mindmap",
    "text": "4.4 Chọn câu lệnh mindmap\n\n\n\n\n1. Wickham, H. Tidy Data. Journal of Statistical Software 59, (2014)."
  },
  {
    "objectID": "viz.html#ggplot",
    "href": "viz.html#ggplot",
    "title": "6  Trực quan hóa",
    "section": "6.1 ggplot",
    "text": "6.1 ggplot\n\n6.1.1 Giới thiệu ggplot\nVẽ đồ thị với ggplot2 dựa trên việc “thêm” các lớp đồ thị và các phần tử thiết kế chồng lên nhau, với mỗi lệnh được thêm vào các lệnh trước bằng một dấu cộng +\nThứ tự cơ bản để vẽ 1 đồ thị ggplot như sau:\n\nBắt đầu với lớp nền bằng lệnh ggplot() - lệnh này “mở” ggplot và cho phép các hàm tiếp theo được thêm vào với dấu +. Thông thường, đối tượng cần vẽ được chỉ định trong lệnh này\nThêm các lớp geom - mỗi lớp geom sẽ thêm 1 loại biểu đồ (VD: biểu đồ cột, biểu đồ đường, biểu đồ phân tán, histogram). Các hàm này đều bắt đầu bằng geom_\nThêm các yếu tố thiết kế vào đồ thị, chẳng hạn như nhãn trục, tiêu đề, phông chữ, kích thước, phối màu, chú giải hoặc xoay trục\n\n\n# vẽ đồ thị từ bảng dữ liệu my_data\nggplot(data = my_data)+                   \n  geom_point(                             # vẽ đồ thị phân tán\n    mapping = aes(x = col1, y = col2),    # dùng giá trị cột col1 làm trục x và col2 làm trục y\n    color = \"red\")+                       # tuỳ chọn khác\n  labs()+                                 # thêm tên bảng và tên các trục\n  theme()                                 # chỉnh thêm màu sắc, font, size\n\n\n\n\n\n\n\nChọn màu cho ggplot\n\n\n\nNgoài các màu cơ bản, ta có thể quy định màu trong R dưới dạng hex color\nVD\n\nggplot(data = my_data)+                   \n  geom_point(                             \n    mapping = aes(x = col1, y = col2),    \n    color = \"#03d3fc\")\n\nĐể có được hex color, ta có thể google “hex color”, chọn màu phù hợp và copy HEX\n\n\n\n\n\n6.1.2 Một số geom_ thông dụng\n\nHistograms - geom_histogram()\nBiểu đồ cột - geom_bar() hoặc geom_col()\nBox plots - geom_boxplot()\nĐiểm (vd: biểu đồ phân tán) - geom_point()\nBiểu đồ đường - geom_line() hoặc geom_path()\nĐường xu hướng - geom_smooth()\n\n\n\n\n\n\n\nArgument stat của hàm geom\n\n\n\n\n\"identity\" lấy dữ liệu thô\n\"count\" đếm số quan sát (số hàng) trong từng phân nhóm\n\"sum\" tính tổng của các hàng trong từng phân nhóm\n\n\n\n\n\n6.1.3 Facet\nFacets, hay “chia nhỏ biểu đồ”, được sử dụng để chia một biểu đồ thành nhiều phần nhỏ, với mỗi phần (“facet”) đại diện cho một nhóm của dữ liệu.\nTrong ggplot, có 2 loại facet chính\n\nfacet_wrap() hiện thị các biểu đồ khác nhau cho từng nhóm của một biến số. (VD: thể hiện các đường cong dịch bệnh khác nhau cho từng khu vực).\nfacet_grid() áp dụng khi muốn đưa một biến thứ hai vào sắp xếp các biểu đồ con. Ở đây mỗi ô thể hiện sự giao nhau của các giá trị giữa hai cột.\n\nVD:\n\n\n\n\n\n\n\nfacet_wrap\nfacet_grid\n\n\n\n\nbiểu đồ số ca bệnh sốt rét chia theo tỉnh (tên tỉnh ở phía trên mỗi biểu đồ)\nbiểu đồ số ca bệnh sốt rét chia theo tỉnh và nhóm tuổi"
  },
  {
    "objectID": "viz.html#plotly",
    "href": "viz.html#plotly",
    "title": "6  Trực quan hóa",
    "section": "6.2 Plotly",
    "text": "6.2 Plotly\nPackage plotly cung cấp lệnh ggplotly giúp người dùng nhanh chóng biến biểu đồ của ggplot thành biểu đồ tương tác (interactive plot).\nVD\n\n# Vẽ biểu đồ bằng ggplot \nplot <- ggplot(data = my_data)+                   \n  geom_point(                             \n    mapping = aes(x = col1, y = col2),    \n    color = \"#03d3fc\")\n\n# Dùng lệnh ggplotly để biến thành biểu đồ tương tác\nggplotly(plot)\n\n\n\n\n\n\n\nLưu ý\n\n\n\nKhi knit file .Rmd sang các định dạng file khác, tính tương tác của đồ thị chỉ còn khi người dùng knit thành file .html"
  },
  {
    "objectID": "viz.html#vẽ-bản-đồ",
    "href": "viz.html#vẽ-bản-đồ",
    "title": "6  Trực quan hóa",
    "section": "6.3 Vẽ bản đồ",
    "text": "6.3 Vẽ bản đồ\n\n6.3.0.1 Dữ liệu bản đồ\nTrước tiên, ta cần dữ liệu để vẽ biểu đồ trong R. Trong khoá học này ta sẽ sử dụng dữ liệu được cấp bởi GADM.\n\nĐể download dữ liệu biểu đồ Việt Nam, thực hiện các bước sau:\n\nVào trang https://gadm.org/download_country.html\nChọn Vietnam trong danh sách Country\nBấm Geopackage\nFile được tải về có tên là gadm41_VNM.gpkg\n\n\n\n\n\n\n\nLưu ý\n\n\n\n\nCác nguồn bản đồ mở thường sẽ không có các phần lãnh thổ tranh chấp (VD: Hoàng Sa, Trường Sa)\nCác thay đổi về bản đồ hành chính có thể không được cập nhật kịp thời (VD: các quận được sáp nhập thành TP. Thủ Đức)\n\n\n\nDữ liệu bản đồ tải về sẽ có 3 cấp bậc\n\nCấp tỉnh/ thành phố\nCấp quận/ huyện\nCấp phường/ xã\n\nĐể đọc dữ liệu bản đồ, dùng lệnh st_read của package sf\nĐể vẽ dữ liệu đọc được, dùng lệnh geom_sf của ggplot\n\n# Đọc dữ liệu bản đồ\nmap_path <- \"data\"\nvn_tinh <- st_read(dsn = file.path(map_path, \"gadm41_VNM.gpkg\"), layer = \"ADM_ADM_1\")\nvn_qh <- st_read(dsn = file.path(map_path, \"gadm41_VNM.gpkg\"), layer = \"ADM_ADM_2\")\nvn_px <- st_read(dsn = file.path(map_path, \"gadm41_VNM.gpkg\"), layer = \"ADM_ADM_3\")\n\n\n# Vẽ dữ liệu đọc được\nvn_tinh %>% \n  ggplot() +\n  ggplot2::geom_sf()\n\n\n\nvn_qh %>% \n  ggplot() +\n  ggplot2::geom_sf()\n\n\n\nvn_px %>% \n  ggplot() +\n  ggplot2::geom_sf()\n\n\n\n\n\n\n\n\n\n\nDebug package sf\n\n\n\nNếu gặp lỗi như sau khi chạy geom_sf()\nIn CPL_crs_from_input(x) :\n  GDAL Error 1: PROJ: proj_create_from_database: Cannot find proj.db\nChạy dòng code sau và load lại package sf để giải quyết lỗi\n\nremove.packages(\"sf\")\n\n- Removing package(s) from project library ...\nRemoving package 'sf' ... Done!\n\ninstall.packages('sf', repos = c('https://r-spatial.r-universe.dev'))\n\nInstalling package into '/Users/anhptq/Desktop/r4babies/renv/library/R-4.3/aarch64-apple-darwin20'\n(as 'lib' is unspecified)\n\n\n\nThe downloaded binary packages are in\n    /var/folders/rf/dwxhm19j1ws1mfmsvj9yfp140000gr/T//RtmprX1cWc/downloaded_packages\n\n\n\n\n\n\n6.3.1 Leaflet\nGói leaflet được dùng để vẽ bản đồ tương tác.\nChúng ta sử dụng leaflet thay vì ggplot + plotly vì bản đồ vẽ bởi leaflet thường đẹp hơn\n\n\nlabels <- sprintf(\"<strong> %s </strong> \", vn_tinh$NAME_1) %>%\n  lapply(htmltools::HTML)\nleaflet(vn_tinh) %>%\n  #addTiles() %>%\n  addPolygons(color = \"grey\", weight = 1,label = labels)"
  },
  {
    "objectID": "analysis.html#summarize",
    "href": "analysis.html#summarize",
    "title": "5  Phân tích",
    "section": "5.1 summarize",
    "text": "5.1 summarize\nHàm summarize của package dplyr được sử dụng chung với các hàm thống kê (aggregation function) để tạo bảng mô tả thống kê cho dữ liệu.\n\nMột số hàm thống kê thông dụng.\n\n\n\nHàm\nCông dụng\n\n\n\n\nmean()\ntính trung bình\n\n\nmin()\ngiá trị nhỏ nhất\n\n\nmax()\ngiá trị lớn nhất\n\n\nmedian()\nsố trung vị\n\n\nquantile()\nđiểm phân vị\n\n\nsd()\nđộ lệch chuẩn\n\n\n\nHàm group_by được sử dụng khi cần chia dữ liệu theo nhóm trước khi tính toán thống kê cho từng nhóm."
  },
  {
    "objectID": "analysis.html#gtsummary",
    "href": "analysis.html#gtsummary",
    "title": "5  Phân tích",
    "section": "5.2 gtsummary",
    "text": "5.2 gtsummary\nPackage gtsummary có thể hỗ trợ người dùng vẽ các bảng thống kê một cách nhanh chóng"
  },
  {
    "objectID": "analysis.html#các-phép-kiểm-thường-dùng",
    "href": "analysis.html#các-phép-kiểm-thường-dùng",
    "title": "5  Phân tích",
    "section": "5.3 Các phép kiểm thường dùng",
    "text": "5.3 Các phép kiểm thường dùng"
  },
  {
    "objectID": "analysis.html#so-sánh",
    "href": "analysis.html#so-sánh",
    "title": "5  Phân tích",
    "section": "5.4 So sánh",
    "text": "5.4 So sánh"
  },
  {
    "objectID": "report.html#giới-thiệu-file-rmd",
    "href": "report.html#giới-thiệu-file-rmd",
    "title": "8  Làm báo cáo bằng R Markdown",
    "section": "8.1 Giới thiệu file Rmd",
    "text": "8.1 Giới thiệu file Rmd\n\n8.1.1 File .R vs .Rmd (R markdown)\n\nFile .R: chỉ chứa các lệnh R\nFile .Rmd: thường được dùng cho báo cáo vì có thể kết hợp các lệnh R, văn bản thường, đồ thị trong 1 file \n\n\n\n8.1.2 Cấu trúc file Rmd\nGồm 3 phần chính:\n\nphần YAML header: nằm ở trên cùng trong và ngăn cách với phần còn lại bằng cặp dấu ---. Phần này để mô tả tiêu đề tài liệu, tác giả, ngày tháng, định dạng mong muốn\nPhần văn bản (được viết bằng ngôn ngữ markdown)\nPhần lệnh R (được gọi là chunk). Phần kết quả của câu lệnh R có thể hiển thị dưới dạng string, bảng dữ liệu hoặc đồ thị.\n\n\n\n\n8.1.3 Markdown\nNgười dùng có thể điều chỉnh format (VD: heading, in đậm, in nghiêng) của văn bản trong Markdown bằng cách sử dụng các cú pháp nhất định.\nMột số cú pháp thông dụng:\n\n# Tiêu đề (Heading) - số dấu # tượng trưng cho cấp độ tiêu đề.\nVD:\n\n\n\n\n\n\n\nMarkdown\nOutput\n\n\n\n\n# This is Heading 1\nThis is Heading 1\n\n\n## This is Heading 2\nThis is Heading 2\n\n\n### This is Heading 3\nThis is Heading 3\n\n\n\n* Đặt trước và sau cụm từ. Tuỳ vào số dấu *, văn bản sẽ được in đậm, in nghiêng hoặc cả 2\n\n\n\nMarkdown\nOutput\n\n\n\n\n*Italic*\nItalic\n\n\n**Bold**\nBold\n\n\n***Bold and Italic***\nBold and Italic\n\n\n\n\nTổng hợp các cú pháp markdown\n\n\n\n\n\n\nRmd outline\n\n\n\nTa có thể xem cấu trúc của 1 file Rmd theo 2 cách\n\nBấm Outline để hiện danh sách Header (theo format markdown).\nXem mục lục các Header và Chunk ở thanh ngang gần console.\n\n\n\n\n\n\n\nCách 1\nCách 2\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n8.1.4 Chunk\nTrong Rmd, chunk có format là \n```{r tên chunk}\ncác dòng lệnh R\n```\nĐể tạo 1 chunk mới, người dùng đặt con trỏ ở vị trí muốn tạo chunk mới → bấm nút tạo chunk (1) → chọn R (2)\n\nĐể chạy chunk, người dùng có thể chọn chạy từng dòng hoặc chạy cả chunk\n\nChạy từng dòng: để con trỏ tại hàng cần chạy → Run → Run Selected Line(s) (Shortcut: Ctrl+Enter)\nChạy cả chunk: \n\nĐể con trỏ tại chunk cần chạy → Run → Run Current Chunk\nHoặc trực tiếp bấm nút Run ở chunk"
  },
  {
    "objectID": "report.html#xuất-file-.rmd-sang-định-dạng-khác",
    "href": "report.html#xuất-file-.rmd-sang-định-dạng-khác",
    "title": "8  Làm báo cáo bằng R Markdown",
    "section": "8.2 Xuất file .Rmd sang định dạng khác",
    "text": "8.2 Xuất file .Rmd sang định dạng khác\nBấm mũi tên bên cạnh chữ Knit → chọn định dạng file xuất (HTML/Word/PDF)"
  }
]